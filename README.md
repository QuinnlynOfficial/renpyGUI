# Ren'Py脚本生成工具

## 软件介绍
Ren'Py脚本生成工具是一款基于Python + Tkinter开发的可视化工具，旨在帮助Ren'Py游戏开发者快速创建对话脚本，无需手动编写Ren'Py语法代码，降低脚本制作门槛。

### 核心功能
- 可视化角色管理（支持变量名/显示名拆分，符合Ren'Py语法规范）
- 角色对话与旁白快速编辑
- 对话内容拖动排序
- 脚本临时保存/导入，防止内容丢失
- 一键生成标准Ren'Py脚本文件（.rpy）
- 角色配置文件独立管理，支持批量导入导出

## 快速开始
### 运行环境
- 系统要求：Windows 7/8/10/11（32/64位）
- 无需安装Python，直接运行EXE程序即可

### 首次使用
1. 双击「RenPy脚本生成工具.exe」启动程序
2. 初始界面为开始页，可选择：
   - 新建脚本文件：创建空白脚本
   - 打开临时脚本文件：恢复之前保存的编辑内容
   - 新建角色配置文件：批量管理角色信息

## 使用教程
### 1. 角色管理
#### 新增角色
- 在「角色管理」区域，填写：
  - 变量名（预定义值）：仅允许字母、数字、下划线，禁止中文（符合Ren'Py变量规范）
  - 显示名称：支持中文，为游戏内实际显示的角色名
- 点击「添加角色」完成创建，角色会同步到对话选择下拉框

#### 导入角色配置
- 点击「从配置文件导入角色」，选择已保存的角色配置文件（.json），可批量导入角色

### 2. 内容编辑
#### 添加角色对话
1. 在「内容编辑」→「角色对话」区域，选择已创建的角色
2. 在文本框中输入对话内容（支持多行）
3. 点击「添加角色对话」，内容会加入右侧内容列表

#### 添加旁白
1. 在「内容编辑」→「旁白内容」区域输入旁白文本
2. 点击「添加旁白」，内容会加入右侧内容列表

### 3. 内容排序与管理
- 拖动排序：直接拖动内容列表中的条目调整顺序
- 按钮排序：选中条目后点击「上移选中项」/「下移选中项」微调
- 删除内容：选中条目后点击「删除选中内容」

### 4. 脚本生成与保存
#### 生成脚本
- 点击顶部「生成Ren'Py脚本」按钮，预览生成的脚本内容
#### 保存脚本
- 在预览窗口确认内容后，点击顶部「保存脚本文件」，选择保存路径（建议后缀为.rpy）
#### 临时保存
- 点击顶部「保存临时文件」，将当前编辑的所有内容（角色+对话+场景名）保存为.json文件，便于后续继续编辑

### 5. 场景设置
- 在顶部「场景设置」区域修改场景名称（对应Ren'Py的label标签），默认值为start

## 注意事项
1. 角色变量名规范：
   - 仅允许字母（a-z/A-Z）、数字（0-9）、下划线（_）
   - 不能以数字开头，禁止中文和特殊字符
   - 变量名不可重复，否则会提示创建失败
2. 脚本兼容性：
   - 生成的脚本完全符合Ren'Py官方语法规范，可直接导入Ren'Py项目使用
   - 建议将生成的.rpy文件放在Ren'Py项目的game目录下
3. 数据备份：
   - 关闭程序时会提示是否备份临时文件，建议定期备份，防止内容丢失
4. 长文本编辑：
   - 角色对话和旁白文本框均支持滚动条，可编辑超长文本内容

## 常见问题
### Q1：程序启动后闪退？
- 解决方案：
  1. 确保程序所在路径无中文、空格或特殊字符（如：D:\工具\RenPy工具 改为 D:\RenPy_Tool）
  2. 右键以管理员身份运行程序
  3. 检查系统是否缺少VC++运行库，可安装微软常用运行库合集

### Q2：生成的脚本导入Ren'Py后报错？
- 常见原因：
  1. 角色变量名包含特殊字符或中文（检查角色变量名是否符合规范）
  2. 对话内容包含双引号（程序已自动转义，若手动修改脚本需注意：将"改为\\"）
  3. 场景名称包含空格（程序会自动将空格替换为下划线，手动修改需避免）

### Q3：临时文件无法打开？
- 解决方案：
  1. 确认文件为工具生成的.json格式，而非其他格式
  2. 检查文件是否损坏，可尝试重新保存临时文件
  3. 确保文件路径无中文和特殊字符

### Q4：角色配置文件如何批量编辑？
- 角色配置文件为标准JSON格式，可使用记事本/VSCode等工具批量修改，格式示例：
```json
{
    "characters": [
        {
            "var_name": "player",
            "display_name": "主角"
        },
        {
            "var_name": "npc01",
            "display_name": "商店老板"
        }
    ]
}
